<!doctype html>
<html lang="en" data-vocs>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/initializeTheme.iife.js"></script><link rel="preload" as="image" href="/images/jincubator.png"/><link rel="preload" as="image" href="/posts/2023-03-23-rainbow-costs/eth2NearFundsTransfer.jpg"/><title>Ethereum Bridging using Light Clients - Rainbow Costing – John Whitton</title><link rel="icon" href="/images/jincubator.png" type="image/png"/><meta property="og:type" content="website"/><meta property="og:title" content="Ethereum Bridging using Light Clients - Rainbow Costing"/><meta property="og:image" content="https://vocs.dev/api/og?logo=/images/jincubator.png&title=Ethereum Bridging using Light Clients - Rainbow Costing&description="/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:image" content="https://vocs.dev/api/og?logo=/images/jincubator.png&title=Ethereum%20Bridging%20using%20Light%20Clients%20-%20Rainbow%20Costing&description=undefined"/>
    <script type="module" crossorigin src="/assets/index-C6RsGgs6.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/style-Be0W4_oP.css">
  </head>
  <body>
    <div id="app"><div class="vocs_DocsLayout" data-layout="docs"><a class="vocs_SkipLink vocs_utils_visuallyHidden" href="/writing/2023-02-23-rainbow-costs#vocs-content">Skip to content</a><div class="vocs_DocsLayout_gutterLeft"><aside class="vocs_Sidebar vocs_DocsLayout_sidebar"><div><div class="vocs_Sidebar_logoWrapper"><div class="vocs_Sidebar_logo"><a style="align-items:center;display:flex;height:100%" href="/" data-discover="true"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo" src="/images/jincubator.png"/></a></div><div class="vocs_Sidebar_divider"></div></div><nav class="vocs_Sidebar_navigation"><div class="vocs_Sidebar_group"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/writing/intro" variant="styleless" data-discover="true">John&#x27;s Writing</a><a data-active="true" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/writing/2023-02-23-rainbow-costs" variant="styleless" data-discover="true">Ethereum Bridging using Light Clients - Rainbow Costing</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/writing/2021-12-01-eave-defi" variant="styleless" data-discover="true">Draft EAVE Whitepaper</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/writing/2021-05-01-kanga" variant="styleless" data-discover="true">Kanga Protocol Whitepaper</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/writing/2021-04-01-eave-parachain" variant="styleless" data-discover="true">EAVE Parachain Design</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/writing/2019-10-16-devcon5" variant="styleless" data-discover="true">Lessons Learned from Devcon5</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/writing/2018-07-17-projectx" variant="styleless" data-discover="true">Project-X Technical White Paper</a></div></section></div></nav></div><div class="vocs_Sidebar_footer"><div class="vocs_Sidebar_footerCurtain"></div><div class="vocs_Sidebar_footerContent"><div class="vocs_Socials"><a class="vocs_Socials_button" href="https://github.com/johnwhitton" target="_blank" rel="noopener noreferrer"><div aria-label="GitHub" class="vocs_Icon vocs_Socials_icon" role="img" style="--vocs_Icon_size:17px"><svg width="100%" height="100%" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"></path></svg></div></a><div style="width:1px;margin-top:var(--vocs-space_4);margin-bottom:var(--vocs-space_4);background-color:var(--vocs-color_border)"></div><a class="vocs_Socials_button" href="https://twitter.com/johnwhitton" target="_blank" rel="noopener noreferrer"><div aria-label="X (Twitter)" class="vocs_Icon vocs_Socials_icon" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 1200 1227" fill="none" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z" fill="currentColor"></path></svg></div></a><div style="width:1px;margin-top:var(--vocs-space_4);margin-bottom:var(--vocs-space_4);background-color:var(--vocs-color_border)"></div><a class="vocs_Socials_button" href="https://t.me/john_whitton" target="_blank" rel="noopener noreferrer"><div aria-label="Telegram" class="vocs_Icon vocs_Socials_icon" role="img" style="--vocs_Icon_size:17px"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 50 50"><title>Telegram</title><path d="M25 2c12.703 0 23 10.297 23 23S37.703 48 25 48 2 37.703 2 25 12.297 2 25 2zm7.934 32.375c.423-1.298 2.405-14.234 2.65-16.783.074-.772-.17-1.285-.648-1.514-.578-.278-1.434-.139-2.427.219-1.362.491-18.774 7.884-19.78 8.312-.954.405-1.856.847-1.856 1.487 0 .45.267.703 1.003.966.766.273 2.695.858 3.834 1.172 1.097.303 2.346.04 3.046-.395.742-.461 9.305-6.191 9.92-6.693.614-.502 1.104.141.602.644-.502.502-6.38 6.207-7.155 6.997-.941.959-.273 1.953.358 2.351.721.454 5.906 3.932 6.687 4.49.781.558 1.573.811 2.298.811.725 0 1.107-.955 1.468-2.064z" fill="currentColor"></path></svg></div></a></div></div></div></aside></div><div class="vocs_DocsLayout_gutterTop vocs_DocsLayout_gutterTop_offsetLeftGutter"><div class="vocs_DesktopTopNav"><button class="vocs_DesktopSearch_search" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Rlj»" data-state="closed"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-top:2px"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>Search...<div class="vocs_DesktopSearch_searchCommand"><div style="background:currentColor;transform:rotate(45deg);width:1.5px;border-radius:2px;height:100%"></div></div></button><div class="vocs_DesktopTopNav_logoWrapper"><div class="vocs_DesktopTopNav_logo"><a style="align-items:center;display:flex;height:56px;margin-top:4px" href="/" data-discover="true"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo" src="/images/jincubator.png"/></a></div></div><div class="vocs_DesktopTopNav_section"></div><div class="vocs_DesktopTopNav_section"><div class="vocs_DesktopTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><a data-active="true" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/" variant="styleless" data-radix-collection-item="" data-discover="true">Home</a><a data-active="false" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/about" variant="styleless" data-radix-collection-item="" data-discover="true">About John</a><a data-active="false" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/resume" variant="styleless" data-radix-collection-item="" data-discover="true">Resume</a><a data-active="false" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/references/intro" variant="styleless" data-radix-collection-item="" data-discover="true">References</a><a data-active="false" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/writing/intro" variant="styleless" data-radix-collection-item="" data-discover="true">Writing</a><a data-active="false" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/research/intro" variant="styleless" data-radix-collection-item="" data-discover="true">Research</a></ul></div></nav></div></div></div><div class="vocs_MobileTopNav"><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group"><div class="vocs_MobileTopNav_logo"><a style="align-items:center;display:flex;height:100%" href="/" data-discover="true"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo" src="/images/jincubator.png"/></a></div></div><div class="vocs_MobileTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_MobileTopNav_navigation vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><a data-active="true" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/" variant="styleless" data-radix-collection-item="" data-discover="true">Home</a><a data-active="false" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/about" variant="styleless" data-radix-collection-item="" data-discover="true">About John</a><a data-active="false" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/resume" variant="styleless" data-radix-collection-item="" data-discover="true">Resume</a><a data-active="false" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/references/intro" variant="styleless" data-radix-collection-item="" data-discover="true">References</a><a data-active="false" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/writing/intro" variant="styleless" data-radix-collection-item="" data-discover="true">Writing</a><a data-active="false" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/research/intro" variant="styleless" data-radix-collection-item="" data-discover="true">Research</a></ul></div></nav><div class="vocs_MobileTopNav_navigation vocs_MobileTopNav_navigation_compact"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Rkpj»" data-state="closed" class="vocs_MobileTopNav_menuTrigger vocs_MobileTopNav_navigationItem">Home<div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Down</title><path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button></div></div></div><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group" style="margin-right:-8px"><button class="vocs_MobileSearch_searchButton" type="button" aria-label="Search" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«R19j»" data-state="closed"><svg width="21" height="21" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div></div></div></div><div class="vocs_DocsLayout_gutterTopCurtain vocs_DocsLayout_gutterTopCurtain_withSidebar"><div class="vocs_DesktopTopNav_curtain"></div><div class="vocs_MobileTopNav_curtain"><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Rqj»" data-state="closed" class="vocs_MobileTopNav_menuTrigger"><div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:13px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 79 48" fill="none"><title>Menu</title><path fill="currentColor" d="M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"></path></svg></div><div class="vocs_MobileTopNav_menuTitle">Ethereum Bridging using Light Clients - Rainbow Costing</div></button></div></div><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«R5aj»" data-state="closed" class="vocs_MobileTopNav_outlineTrigger">On this page<div aria-label="On this page" class="vocs_Icon" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button></div></div></div></div><div class="vocs_DocsLayout_gutterRight vocs_DocsLayout_gutterRight_withSidebar"></div><div id="vocs-content" class="vocs_DocsLayout_content vocs_DocsLayout_content_withSidebar vocs_DocsLayout_content_withTopNav"><article class="vocs_Content"><header class="vocs_Header"><h1 class="vocs_H1 vocs_Heading"><div id="ethereum-bridging-using-light-clients---rainbow-costing" class="vocs_Heading_slugTarget"></div>Ethereum Bridging using Light Clients - Rainbow Costing<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/writing/2023-02-23-rainbow-costs#ethereum-bridging-using-light-clients---rainbow-costing" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h1></header>
<p class="vocs_Paragraph">A review of how Bridging costs can be reduced using light clients. Taking the near Rainbow Bridge as an example.</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">date: 2022-02-23</li>
<li class="vocs_ListItem">author: John Whitton</li>
<li class="vocs_ListItem">contributors: Thanks to Aaron Li for their helpful suggestions.</li>
</ul>
<header class="vocs_Header"><h1 class="vocs_H1 vocs_Heading"><div id="ethereum-bridging-using-light-clients---rainbow-costing-1" class="vocs_Heading_slugTarget"></div>Ethereum Bridging using Light Clients - Rainbow Costing<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/writing/2023-02-23-rainbow-costs#ethereum-bridging-using-light-clients---rainbow-costing-1" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h1></header>
<p class="vocs_Paragraph">A review of how Bridging costs can be reduced using light clients. Taking the near Rainbow Bridge as an example</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">date: 2022-02-23</li>
<li class="vocs_ListItem">author: John Whitton</li>
<li class="vocs_ListItem">contributors: Thanks to Aaron Li for their helpful suggestions.</li>
</ul>
<h2 class="vocs_H2 vocs_Heading"><div id="table-of-contents" class="vocs_Heading_slugTarget"></div>Table of Contents<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/writing/2023-02-23-rainbow-costs#table-of-contents" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor" href="/writing/2023-02-23-rainbow-costs#ethereum-bridging-using-light-clients---rainbow-costing">Ethereum Bridging using Light Clients - Rainbow Costing</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor" href="/writing/2023-02-23-rainbow-costs#ethereum-bridging-using-light-clients---rainbow-costing-1">Ethereum Bridging using Light Clients - Rainbow Costing</a>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor" href="/writing/2023-02-23-rainbow-costs#table-of-contents">Table of Contents</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor" href="/writing/2023-02-23-rainbow-costs#introduction">Introduction</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor" href="/writing/2023-02-23-rainbow-costs#bridge-transaction-walk-through">Bridge Transaction Walk Through</a>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor" href="/writing/2023-02-23-rainbow-costs#actors">Actors</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor" href="/writing/2023-02-23-rainbow-costs#sample-transactionflow">Sample TransactionFlow</a></li>
</ul>
</li>
<li class="vocs_ListItem"><a class="vocs_Anchor" href="/writing/2023-02-23-rainbow-costs#bridging-resources-required">Bridging Resources Required</a>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor" href="/writing/2023-02-23-rainbow-costs#references">References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="vocs_H2 vocs_Heading"><div id="introduction" class="vocs_Heading_slugTarget"></div>Introduction<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/writing/2023-02-23-rainbow-costs#introduction" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">In this article we review the use of light clients and how they can improve trust and costing for bridges.</p>
<h2 class="vocs_H2 vocs_Heading"><div id="bridge-transaction-walk-through" class="vocs_Heading_slugTarget"></div>Bridge Transaction Walk Through<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/writing/2023-02-23-rainbow-costs#bridge-transaction-walk-through" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">Following is a walkthough of a funds transfer from Ethereum to a target chain (In this example Near), complete with light client updates, block propogation and proofs to ensure the transaction validity.</p>
<p class="vocs_Paragraph"><img src="/posts/2023-03-23-rainbow-costs/eth2NearFundsTransfer.jpg" alt="Ethereum to Near Funds Transfer" title="Ethereum to NEAR Funds Transfer"/></p>
<h3 class="vocs_H3 vocs_Heading"><div id="actors" class="vocs_Heading_slugTarget"></div>Actors<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/writing/2023-02-23-rainbow-costs#actors" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">From the diagram above you&#x27;ll notice that there are many actors involved, below is an overview of the actors and the operations they perform.</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Accounts<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://etherscan.io/address/0x29da2ef94deeaf2d2f9003e9354abfcb1ff04b32" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">User Account</a> : The user is the owner of the funds being transferred and is responsible for signing the transactions to authorize bridging them accross chains. In this example they have accounts on <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://etherscan.io/address/0x29da2ef94deeaf2d2f9003e9354abfcb1ff04b32" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Ethereum</a> and <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/johnrubini.near#tokentxns" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">NEAR</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/relayer.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Target Chain Relayer Acccount</a>: The relayer account is responsible for relaying messages from Ethereum to the target chain. *Note this is connected to a relayer which is responsible for tasks such as querying latest block headers and getting light client status updates. Source code is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/tree/master/eth2near/eth2near-block-relay-rs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a>.</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/bridge-validator1.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Target Chain Bridge Validator Accounts</a>: are responsible for validating light client update proposals and sending approval votes to <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/bridge-validator.sputnik-dao.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">DAO Eth Client Contract</a>.</li>
</ul>
</li>
<li class="vocs_ListItem">Ethereum Components<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://etherscan.io/address/0xdac17f958d2ee523a2206206994597c13d831ec7#code" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">ERC20 Token Contract</a>: this is the token contract securing the funds in this examle USDT (Tether). Source code is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/release-v4.8/contracts/token/ERC20/presets/ERC20PresetMinterPauser.sol" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://etherscan.io/address/0x23ddd3e3692d1861ed57ede224608875809e127f#code" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Bridge Contract</a>: Responsible for deposits and withdrawals of tokens on Ethereum as well as various proving and propogation mechanisms such as checking of Signatures and adding Light Client Blocks. Source code is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/contracts/eth/nearbridge/contracts/NearBridge.sol" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a></li>
</ul>
</li>
<li class="vocs_ListItem">Target Chain (NEAR) Components<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/bridge-validator.sputnik-dao.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Validator DAO Contract</a>: Responsible for receivng light client update proposals from the relayer and gathering approval votes for these propoals from Validators and submitting light client updates once the proposal is approved by the Validators. Source code is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/eth2near/contract_wrapper/src/dao_eth_client_contract.rs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/client-eth2.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Etherum 2 Client</a>: The Ethereum 2 client is responsbile for processing light client updates and receiving execution header blocks from Ethereum via the relayer. Source code is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/contracts/near/eth2-client/src/lib.rs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a>. <em>Note: this replaced the <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/client.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Ethereum 1 client</a> source code <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/contracts/near/eth-client/src/lib.rs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a></em></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/prover.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Ethereum Prover</a> : The Ethereum Prover is used to prove transactions are included in a valid block Header. Source code is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/contracts/near/eth-prover/src/lib.rs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/factory.bridge.near#contract" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Bridge Contract</a>: The Bridge contract is responsible for managing tokens including creating new tokens, setting metadata and depositing and withdrawal of tokens. Source code is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-token-connector/blob/master/bridge-token-factory/src/lib.rs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a>.<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/token/dac17f958d2ee523a2206206994597c13d831ec7.factory.bridge.near?a=dac17f958d2ee523a2206206994597c13d831ec7.factory.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">NEAR Token Contract</a>: The target chain representation of the token (USDT) managed by the target chain bridge contract.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="vocs_H3 vocs_Heading"><div id="sample-transactionflow" class="vocs_Heading_slugTarget"></div>Sample TransactionFlow<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/writing/2023-02-23-rainbow-costs#sample-transactionflow" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem">Block Propogation<!-- -->
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem">Get the Latest Slot: The relayer loops polling Ethereum every 12 seconds to get the latest slot. It then checks if it is for a new epoch and if so (every 6 minutes) submits an execution header (with 32 blocks in it) and a light client update with the latest approved epochs and updated sync_comittee. Relayer source code for the loop is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/eth2near/eth2near-block-relay-rs/src/eth2near_relay.rs#L258" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a> for retrieving the latest slot is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/eth2near/eth2near-block-relay-rs/src/eth2near_relay.rs#L163" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a>, for submitting execution blocks is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/eth2near/eth2near-block-relay-rs/src/eth2near_relay.rs#L399" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a> and for sending light client updates is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/eth2near/eth2near-block-relay-rs/src/eth2near_relay.rs#L489" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a>.<!-- -->
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/txns/HaXUxCvA1D87QXJzPzSYXmFYNuSLbTmyuxShzWgSLvPM" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Send Block Headers (submit_execution_header)</a>: Batch transaction which submits 32 block headers to <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/client-eth2.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">client-eth2.bridge.near</a> for Ethereum Blocks 16493592 to 16493623. (The second slot in epoch <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://beaconcha.in/epoch/176936" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">176,936</a> to the first slot in epoch <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://beaconcha.in/epoch/176937" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">176,937</a>). <strong class="vocs_Strong">Executed every 6 minutes when the first slot of a new epoch is found.</strong></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/txns/J1tQ465Dxt4UhWy9Msn2pZCbdkWatSepqsx9sDZaX35z#" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Create Light Client update proposal(add_proposal)</a>: calls <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/bridge-validator.sputnik-dao.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">bridge-validator.sputnik-dao.near</a> to add proposal 17410 for <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://beaconcha.in/slot/5661984" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">slot 5,661,984</a> in epoch <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://beaconcha.in/epoch/176937" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">176,937</a>.</li>
</ol>
</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/txns/D5uP4BbRSUX4ZGijRfWGkR5KbFb2Kb9q1gSsFVQbYSLt" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Approve Proposal (act_proposal)</a>: sends a VoteApprove action for proposal 17410 from a <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/bridge-validator1.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">bridge validator</a> to the <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/bridge-validator.sputnik-dao.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Validator DAO Contract</a>.<!-- -->
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem">act_proposal in contract <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/bridge-validator.sputnik-dao.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">bridge-validator.sputnik-dao.near</a></li>
<li class="vocs_ListItem">submit_beacon_chain_light_client_update in <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/client-eth2.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">client-eth2.bridge.near</a></li>
<li class="vocs_ListItem">on_proposal_callback in contract <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/bridge-validator.sputnik-dao.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">bridge-validator.sputnik-dao.near</a></li>
</ol>
</li>
</ol>
</li>
<li class="vocs_ListItem">Funds Transfer Transaction Flow<!-- -->
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://etherscan.io/tx/0xa685c59a24cc2056e10e660ce8a8bff7bbc335433698e138c77aaadf20ecb614" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Lock Funds On Ethereum</a>: Locking 10,000 USDT to send to user on NEAR.</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/txns/vniyRR67ndrtvpoQ9c5ACoT4e9c283VSQsrZcN6GGto#execution" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Deposit Funds on Target Chain Bridge Contract (deposit)</a>
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem">deposit in contract factory.bridge.near</li>
<li class="vocs_ListItem">verify_log_entry in contract prover.bridge.near</li>
<li class="vocs_ListItem">block_hash_safe in contract client-eth2.bridge.near</li>
<li class="vocs_ListItem">finish_deposit in contract factory.bridge.near : mint of 10,000 USDT.</li>
</ol>
</li>
</ol>
</li>
</ol>
<strong class="vocs_Strong">TODO</strong>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Find and review the source code for the <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/txns/HnzBR7x5Sxnmcm4MfRt1ghhMjJNspDaygUUKeM9T27Li#execution" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">validator light client approval update</a>. <em>Note: the eth2_client has a <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/contracts/near/eth2-client/src/lib.rs#L311" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">validate_light_client_update</a> which is <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/contracts/near/eth2-client/src/lib.rs#L42" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">configurable</a> and is used for debugging purposes.</em></li>
</ul>
<h2 class="vocs_H2 vocs_Heading"><div id="bridging-resources-required" class="vocs_Heading_slugTarget"></div>Bridging Resources Required<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/writing/2023-02-23-rainbow-costs#bridging-resources-required" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">Here is the storage and compuational costs per component.</p>
<table class="vocs_Table"><thead><tr class="vocs_TableRow"><th class="vocs_TableHeader">Component</th><th class="vocs_TableHeader">Data</th><th class="vocs_TableHeader">Storage</th><th class="vocs_TableHeader">Notes</th></tr></thead><tbody><tr class="vocs_TableRow"><td class="vocs_TableCell"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/contracts/near/eth2-client/src/lib.rs#L35" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Ethereum 2 Client</a></td><td class="vocs_TableCell">---</td><td class="vocs_TableCell">---</td><td class="vocs_TableCell">---</td></tr><tr class="vocs_TableRow"><td class="vocs_TableCell"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/contracts/near/eth-prover/src/lib.rs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Prover</a></td><td class="vocs_TableCell">not applicable</td><td class="vocs_TableCell">0 bytes</td><td class="vocs_TableCell"></td></tr><tr class="vocs_TableRow"><td class="vocs_TableCell"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/aurora-is-near/rainbow-bridge/blob/master/eth2near/contract_wrapper/src/dao_contract.rs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">DAO Contract</a></td><td class="vocs_TableCell"></td><td class="vocs_TableCell"></td><td class="vocs_TableCell"></td></tr></tbody></table>
<p class="vocs_Paragraph"><strong class="vocs_Strong">TODO</strong>
Review the following data structure and elements and move into the table above commenting on any mandatory requirements and structures that can be improved.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">pub </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">struct</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> Eth2Client {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// If set, only light client updates by the trusted signer will be accepted</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    trusted_signer: Option</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">AccountId</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Mask determining all paused functions</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    paused: Mask,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Whether the client validates the updates.</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Should only be set to `false` for debugging, testing, and diagnostic purposes</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    validate_updates: </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">bool</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Whether the client verifies BLS signatures.</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    verify_bls_signatures: </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">bool</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// We store the hashes of the blocks for the past `hashes_gc_threshold` headers.</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Events that happen past this threshold cannot be verified by the client.</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// It is desirable that this number is larger than 7 days&#x27; worth of headers, which is roughly</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// 51k Ethereum blocks. So this number should be 51k in production.</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    hashes_gc_threshold: u64,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Network. e.g. mainnet, kiln</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    network: Network,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Hashes of the finalized execution blocks mapped to their numbers. Stores up to `hashes_gc_threshold` entries.</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Execution block number -&gt; execution block hash</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    finalized_execution_blocks: LookupMap</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">u64, H256</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// All unfinalized execution blocks&#x27; headers hashes mapped to their `HeaderInfo`.</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Execution block hash -&gt; ExecutionHeaderInfo object</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    unfinalized_headers: UnorderedMap</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">H256, ExecutionHeaderInfo</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// `AccountId`s mapped to their number of submitted headers.</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Submitter account -&gt; Num of submitted headers</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    submitters: LookupMap</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">AccountId, u32</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Max number of unfinalized blocks allowed to be stored by one submitter account</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// This value should be at least 32 blocks (1 epoch), but the recommended value is 1024 (32 epochs)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    max_submitted_blocks_by_account: u32,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // The minimum balance that should be attached to register a new submitter account</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    min_storage_balance_for_submitter: Balance,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    /// Light client state</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    finalized_beacon_header: ExtendedBeaconBlockHeader,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    finalized_execution_header: LazyOption</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">ExecutionHeaderInfo</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    current_sync_committee: LazyOption</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">SyncCommittee</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    next_sync_committee: LazyOption</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">SyncCommittee</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="references" class="vocs_Heading_slugTarget"></div>References<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/writing/2023-02-23-rainbow-costs#references" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<strong class="vocs_Strong">Explorer and Interactive Links</strong>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">
<p class="vocs_Paragraph">Near</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">eth-prover<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/relayer.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://nearblocks.io/address/relayer.bridge.near</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/client-eth2.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://nearblocks.io/address/client-eth2.bridge.near</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/client.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://nearblocks.io/address/client.bridge.near</a></li>
</ul>
</li>
<li class="vocs_ListItem">eth-client<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/prover.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://nearblocks.io/address/prover.bridge.near</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/client.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://nearblocks.io/address/client.bridge.near</a></li>
</ul>
</li>
<li class="vocs_ListItem">factory (manages tokens)<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/factory.bridge.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://nearblocks.io/address/factory.bridge.near</a></li>
</ul>
</li>
<li class="vocs_ListItem">dao<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/bridge-validator.sputnik-dao.near" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://nearblocks.io/address/bridge-validator.sputnik-dao.near</a></li>
</ul>
</li>
<li class="vocs_ListItem">aurora<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/aurora" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://nearblocks.io/address/aurora</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://nearblocks.io/address/relay.aurora" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://nearblocks.io/address/relay.aurora</a></li>
</ul>
</li>
</ul>
</li>
<li class="vocs_ListItem">
<p class="vocs_Paragraph">Ethereum</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://beaconcha.in/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">beaconcha.in</a>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://beaconcha.in/validators" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">validators</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://beaconcha.in/epochs" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">epochs</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://beaconcha.in/slots" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">slots</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://beaconcha.in/blocks" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">blocks</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://beaconcha.in/transactions" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">transactions</a></li>
</ul>
</li>
<li class="vocs_ListItem">Near Bridge<!-- -->
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://etherscan.io/address/0x3fefc5a4b1c02f21cbc8d3613643ba0635b9a873" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">NearBridge</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://etherscan.io/tx/0xa685c59a24cc2056e10e660ce8a8bff7bbc335433698e138c77aaadf20ecb614" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">ERC20Locker</a></li>
</ul>
</li>
</ul>
</li>
</ul></article><footer class="vocs_Footer" data-layout="docs"><div class="vocs_Footer_container"></div><div><center><p><a href="https://meet.johnwhitton.com">Meet with John</a></p><p class="copyright">John Whitton.<!-- --> <a href="mailto:john@johnwhitton.com">john@johnwhitton.com</a></p><p class="copyright">© John Whitton. Design:<!-- --> <a href="https://html5up.net">HTML5 UP</a>.</p></center></div></footer></div><div data-bottom-observer="true"></div></div></div>
  </body>
</html>
